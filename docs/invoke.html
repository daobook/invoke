
<!DOCTYPE html>

<html lang="zh_CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>inv[oke] 核心用法 &#8212; Invoke  文档</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/translations.js"></script>
    <link rel="index" title="索引" href="genindex.html" />
    <link rel="search" title="搜索" href="search.html" />
    <link rel="next" title="Configuration" href="concepts/configuration.html" />
    <link rel="prev" title="快速入门" href="getting-started.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="inv-oke-core-usage">
<span id="inv"></span><h1><code class="docutils literal notranslate"><span class="pre">inv[oke]</span></code> 核心用法<a class="headerlink" href="#inv-oke-core-usage" title="永久链接至标题">¶</a></h1>
<div class="admonition seealso">
<p class="admonition-title">参见</p>
<p>这个页面记录了 <code class="docutils literal notranslate"><span class="pre">invoke</span></code> 的核心参数、选项和行为（其中包括 <a class="reference internal" href="concepts/library.html#reusing-as-a-binary"><span class="std std-ref">基于 invoke 的自定义二进制文件</span></a> 中的选项）。有关调用用户指定的任务和其他解析器相关的详细信息，请参见 <a class="reference internal" href="concepts/invoking-tasks.html"><span class="doc">Invoking tasks</span></a>。</p>
</div>
<section id="core-options-and-flags">
<h2>核心选项和旗标<a class="headerlink" href="#core-options-and-flags" title="永久链接至标题">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">invoke</span></code> 用法看起来像</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ inv[oke] [--core-opts] task1 [--task1-opts] ... taskN [--taskN-opts]
</pre></div>
</div>
<p>所有核心选项和标志如下；几乎所有这些都必须在任何任务名称之前给出，其中一些（如 <a class="reference internal" href="#cmdoption-h"><code class="xref std std-option docutils literal notranslate"><span class="pre">--help</span></code></a> ）是在命令行中的任何地方专门查找的。（有关解析的详细信息，请参见 <a class="reference internal" href="concepts/invoking-tasks.html#basic-cli-layout"><span class="std std-ref">Basic command line layout</span></a>。）</p>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-complete">
<span class="sig-name descname"><span class="pre">--complete</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-complete" title="永久链接至目标">¶</a></dt>
<dd><p>Print (line-separated) valid tab-completion options for an Invoke command
line given as the ‘remainder’ (i.e. after a <code class="docutils literal notranslate"><span class="pre">--</span></code>). Used for building
<a class="reference internal" href="#tab-completion"><span class="std std-ref">shell completion scripts</span></a>.</p>
<p>For example, when the local tasks tree contains tasks named <code class="docutils literal notranslate"><span class="pre">foo</span></code> and
<code class="docutils literal notranslate"><span class="pre">bar</span></code>, and when <code class="docutils literal notranslate"><span class="pre">foo</span></code> takes flags <code class="docutils literal notranslate"><span class="pre">--foo-arg</span></code> and <code class="docutils literal notranslate"><span class="pre">--foo-arg-2</span></code>,
you might use it like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># Empty input: just task names
$ inv --complete --
foo
bar

# Input not ending with a dash: task names still
$ inv --complete -- foo --foo-arg
foo
bar

# Input ending with a dash: current context&#39;s flag names
$ inv --complete -- foo -
--foo-arg
--foo-arg-2
</pre></div>
</div>
<p>For more details on how to make best use of this option, see
<a class="reference internal" href="#cmdoption-print-completion-script"><code class="xref std std-option docutils literal notranslate"><span class="pre">--print-completion-script</span></code></a>.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-hide">
<span class="sig-name descname"><span class="pre">--hide</span></span><span class="sig-prename descclassname"><span class="pre">=STRING</span></span><a class="headerlink" href="#cmdoption-hide" title="永久链接至目标">¶</a></dt>
<dd><p>Set default value of run()’s ‘hide’ kwarg.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-no-dedupe">
<span class="sig-name descname"><span class="pre">--no-dedupe</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-no-dedupe" title="永久链接至目标">¶</a></dt>
<dd><p>Disable task deduplication.</p>
</dd></dl>

<span class="target" id="print-completion-script"></span><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-print-completion-script">
<span class="sig-name descname"><span class="pre">--print-completion-script</span></span><span class="sig-prename descclassname"><span class="pre">=SHELL</span></span><a class="headerlink" href="#cmdoption-print-completion-script" title="永久链接至目标">¶</a></dt>
<dd><p>Print a completion script for desired <code class="docutils literal notranslate"><span class="pre">SHELL</span></code> (e.g. <code class="docutils literal notranslate"><span class="pre">bash</span></code>, <code class="docutils literal notranslate"><span class="pre">zsh</span></code>,
etc). This can be sourced into the current session in order to enjoy
<a class="reference internal" href="#tab-completion"><span class="std std-ref">tab-completion for tasks and options</span></a>.</p>
<p>These scripts are bundled with Invoke’s distributed codebase, and
internally make use of <a class="reference internal" href="#cmdoption-complete"><code class="xref std std-option docutils literal notranslate"><span class="pre">--complete</span></code></a>.</p>
</dd></dl>

<span class="target" id="prompt-for-sudo-password"></span><dl class="std option">
<dt class="sig sig-object std" id="cmdoption-prompt-for-sudo-password">
<span class="sig-name descname"><span class="pre">--prompt-for-sudo-password</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-prompt-for-sudo-password" title="永久链接至目标">¶</a></dt>
<dd><p>Prompt at the start of the session (before executing any tasks) for the
<code class="docutils literal notranslate"><span class="pre">sudo.password</span></code> configuration value. This allows users who don’t want to
keep sensitive material in the config system or their shell environment to
rely on user input, without otherwise interrupting the flow of the program.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-write-pyc">
<span class="sig-name descname"><span class="pre">--write-pyc</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-write-pyc" title="永久链接至目标">¶</a></dt>
<dd><p>By default, Invoke disables bytecode caching as it can cause hard-to-debug
problems with task files and (for the kinds of things Invoke is typically
used for) offers no noticeable speed benefit. If you really want your
<code class="docutils literal notranslate"><span class="pre">.pyc</span></code> files back, give this option.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-c">
<span id="cmdoption-collection"></span><span class="sig-name descname"><span class="pre">-c</span></span><span class="sig-prename descclassname"> <span class="pre">STRING</span></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--collection</span></span><span class="sig-prename descclassname"><span class="pre">=STRING</span></span><a class="headerlink" href="#cmdoption-c" title="永久链接至目标">¶</a></dt>
<dd><p>Specify collection name to load.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-d">
<span id="cmdoption-debug"></span><span class="sig-name descname"><span class="pre">-d</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--debug</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-d" title="永久链接至目标">¶</a></dt>
<dd><p>Enable debug output.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-dry">
<span class="sig-name descname"><span class="pre">--dry</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-dry" title="永久链接至目标">¶</a></dt>
<dd><p>Echo commands instead of actually running them; specifically, causes any
<code class="docutils literal notranslate"><span class="pre">run</span></code> calls to:</p>
<ul class="simple">
<li><p>Act as if the <code class="docutils literal notranslate"><span class="pre">echo</span></code> option has been turned on, printing the
command-to-be-run to stdout;</p></li>
<li><p>Skip actual subprocess invocation (returning before any of that machinery
starts running);</p></li>
<li><p>Return a dummy <code class="xref py py-obj docutils literal notranslate"><span class="pre">Result</span></code> object with ‘blank’ values (empty
stdout/err strings, <code class="docutils literal notranslate"><span class="pre">0</span></code> exit code, etc).</p></li>
</ul>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-D">
<span id="cmdoption-list-depth"></span><span class="sig-name descname"><span class="pre">-D</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--list-depth</span></span><span class="sig-prename descclassname"><span class="pre">=INT</span></span><a class="headerlink" href="#cmdoption-D" title="永久链接至目标">¶</a></dt>
<dd><p>Limit <a class="reference internal" href="#cmdoption-l"><code class="xref std std-option docutils literal notranslate"><span class="pre">--list</span></code></a> display to the specified number of levels, e.g.
<code class="docutils literal notranslate"><span class="pre">--list-depth</span> <span class="pre">1</span></code> to show only top-level tasks and namespaces.</p>
<p>If an argument is given to <code class="docutils literal notranslate"><span class="pre">--list</span></code>, then this depth is relative; so
<code class="docutils literal notranslate"><span class="pre">--list</span> <span class="pre">build</span> <span class="pre">--list-depth</span> <span class="pre">1</span></code> shows everything at the top level of the
<code class="docutils literal notranslate"><span class="pre">build</span></code> subtree.</p>
<p>Default behavior if this is not given is to show all levels of the entire
task tree.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-e">
<span id="cmdoption-echo"></span><span class="sig-name descname"><span class="pre">-e</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--echo</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-e" title="永久链接至目标">¶</a></dt>
<dd><p>Echo executed commands before running.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-f">
<span id="cmdoption-config"></span><span class="sig-name descname"><span class="pre">-f</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--config</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-f" title="永久链接至目标">¶</a></dt>
<dd><p>Specify a <a class="reference internal" href="concepts/configuration.html#config-hierarchy"><span class="std std-ref">runtime configuration file</span></a> to load.</p>
<p>Note that you may instead use the <code class="docutils literal notranslate"><span class="pre">INVOKE_RUNTIME_CONFIG</span></code> environment
variable in place of this option. If both are given, the CLI option will
win out.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-F">
<span id="cmdoption-list-format"></span><span class="sig-name descname"><span class="pre">-F</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--list-format</span></span><span class="sig-prename descclassname"><span class="pre">=STRING</span></span><a class="headerlink" href="#cmdoption-F" title="永久链接至目标">¶</a></dt>
<dd><p>Change the format used to display the output of <a class="reference internal" href="#cmdoption-l"><code class="xref std std-option docutils literal notranslate"><span class="pre">--list</span></code></a>; may be
one of:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">flat</span></code> (the default): single, flat vertical list with dotted task
names.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nested</span></code>: a nested (4-space indented) vertical list, where each level
implicitly includes its parent (with leading dots as a strong visual clue
that these are still subcollection tasks.)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">json</span></code>: intended for consumption by scripts or other programs, this
format emits JSON representing the task tree, with each ‘node’ in the
tree (the outermost document being the root node, and thus a JSON object)
consisting of the following keys:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: String name of collection; for the root collection this is
typically the module name, so unless you’re supplying alternate
collection name to the load process, it’s usually <code class="docutils literal notranslate"><span class="pre">&quot;tasks&quot;</span></code> (from
<code class="docutils literal notranslate"><span class="pre">tasks.py</span></code>.)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">help</span></code>: First line of collection’s docstring, if it came from a
module; null otherwise (or if module lacked a docstring.)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tasks</span></code>: Immediate children of this collection; an array of objects
of the following form:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: Task’s local name within its collection (i.e. not the full
dotted path you might see with the <code class="docutils literal notranslate"><span class="pre">flat</span></code> format; reconstructing
that path is left up to the consumer.)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">help</span></code>: First line of task’s docstring, or null if it had none.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">aliases</span></code>: An array of string aliases for this task.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">default</span></code>: String naming which task within this collection, if any,
is the default task. Is null if no task is the default.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">collections</span></code>: An array of any sub-collections within this
collection, members of which which will have the same structure as this
outermost document, recursively.</p></li>
</ul>
<p>The JSON emitted is not pretty-printed, but does end with a trailing
newline.</p>
</li>
</ul>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-h">
<span id="cmdoption-help"></span><span class="sig-name descname"><span class="pre">-h</span></span><span class="sig-prename descclassname"> <span class="pre">STRING</span></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--help</span></span><span class="sig-prename descclassname"><span class="pre">=STRING</span></span><a class="headerlink" href="#cmdoption-h" title="永久链接至目标">¶</a></dt>
<dd><p>When given without any task names, displays core help; when given with a
task name (may come before <em>or</em> after the task name) displays help for that
particular task.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-l">
<span id="cmdoption-list"></span><span class="sig-name descname"><span class="pre">-l</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--list</span></span><span class="sig-prename descclassname"><span class="pre">=STRING</span></span><a class="headerlink" href="#cmdoption-l" title="永久链接至目标">¶</a></dt>
<dd><p>List available tasks. Shows all tasks by default; may give an explicit
namespace to ‘root’ the displayed task tree to only that namespace. (This
argument may contain periods, as with task names, so it’s possible to show
only a small, deep portion of the overall tree if desired.)</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-p">
<span id="cmdoption-pty"></span><span class="sig-name descname"><span class="pre">-p</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--pty</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-p" title="永久链接至目标">¶</a></dt>
<dd><p>Use a pty when executing shell commands.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-r">
<span id="cmdoption-search-root"></span><span class="sig-name descname"><span class="pre">-r</span></span><span class="sig-prename descclassname"> <span class="pre">STRING</span></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--search-root</span></span><span class="sig-prename descclassname"><span class="pre">=STRING</span></span><a class="headerlink" href="#cmdoption-r" title="永久链接至目标">¶</a></dt>
<dd><p>Change root directory used for finding task modules.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-T">
<span id="cmdoption-t"></span><span id="cmdoption-command-timeout"></span><span class="sig-name descname"><span class="pre">-T</span></span><span class="sig-prename descclassname"> <span class="pre">INT</span></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--command-timeout</span></span><span class="sig-prename descclassname"><span class="pre">=INT</span></span><a class="headerlink" href="#cmdoption-T" title="永久链接至目标">¶</a></dt>
<dd><p>Set a default command execution timeout of INT seconds. Maps to the
<code class="docutils literal notranslate"><span class="pre">timeouts.command</span></code> config setting.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-V">
<span id="cmdoption-v"></span><span id="cmdoption-version"></span><span class="sig-name descname"><span class="pre">-V</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--version</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-V" title="永久链接至目标">¶</a></dt>
<dd><p>Show version and exit.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-w">
<span id="cmdoption-warn-only"></span><span class="sig-name descname"><span class="pre">-w</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--warn-only</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-w" title="永久链接至目标">¶</a></dt>
<dd><p>Warn, instead of failing, when shell commands fail.</p>
</dd></dl>

</section>
<section id="shell-tab-completion">
<span id="tab-completion"></span><h2>Shell tab completion<a class="headerlink" href="#shell-tab-completion" title="永久链接至标题">¶</a></h2>
<section id="generating-a-completion-script">
<h3>Generating a completion script<a class="headerlink" href="#generating-a-completion-script" title="永久链接至标题">¶</a></h3>
<p>Invoke’s philosophy is to implement generic APIs and then “bake in” a few
common use cases built on top of those APIs; tab completion is no different.
Generic tab completion functionality (outputting a shell-compatible list of
completion tokens for a given command line context) is provided by the
<a class="reference internal" href="#cmdoption-complete"><code class="xref std std-option docutils literal notranslate"><span class="pre">--complete</span></code></a> core CLI option described above.</p>
<p>However, you probably won’t need to use that flag yourself: we distribute a
handful of ready-made wrapper scripts aimed at the most common shells like
<code class="docutils literal notranslate"><span class="pre">bash</span></code> and <code class="docutils literal notranslate"><span class="pre">zsh</span></code> (plus others). These scripts can be automatically
generated from Invoke or <a class="reference internal" href="concepts/library.html#reusing-as-a-binary"><span class="std std-ref">any Invoke-driven command-line tool</span></a>, using <a class="reference internal" href="#cmdoption-print-completion-script"><code class="xref std std-option docutils literal notranslate"><span class="pre">--print-completion-script</span></code></a>; the printed
scripts will contain the correct binary name(s) for the program generating
them.</p>
<p>For example, the following command prints (to stdout) a script which works for
<code class="docutils literal notranslate"><span class="pre">zsh</span></code>, instructs <code class="docutils literal notranslate"><span class="pre">zsh</span></code> to use it for the <code class="docutils literal notranslate"><span class="pre">inv</span></code> and <code class="docutils literal notranslate"><span class="pre">invoke</span></code> programs,
and calls <code class="docutils literal notranslate"><span class="pre">invoke</span> <span class="pre">--complete</span></code> at runtime to get dynamic completion
information:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ invoke --print-completion-script zsh
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>You’ll probably want to source this command or store its output somewhere
permanently; more on that in the next section.</p>
</div>
<p>Similarly, the <a class="reference external" href="http://fabfile.org">Fabric</a> tool inherits from Invoke, and
only has a single binary name (<code class="docutils literal notranslate"><span class="pre">fab</span></code>); if you wanted to get Fabric completion
in <code class="docutils literal notranslate"><span class="pre">bash</span></code>, you would say:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ fab --print-completion-script bash
</pre></div>
</div>
<p>In the rest of this section, we’ll use <code class="docutils literal notranslate"><span class="pre">inv</span></code> in examples, but please remember
to replace it with the program you’re actually using, if it’s not Invoke
itself!</p>
</section>
<section id="sourcing-the-script">
<h3>Sourcing the script<a class="headerlink" href="#sourcing-the-script" title="永久链接至标题">¶</a></h3>
<p>There are a few ways to utilize the output of the above commands, depending on
your needs, where the program is installed, and your shell:</p>
<ul>
<li><p>The simplest and least disruptive method is to <code class="docutils literal notranslate"><span class="pre">source</span></code> the printed
completion script inline, which doesn’t place anything on disk, and will only
affect the current shell session:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ source &lt;(inv --print-completion-script zsh)
</pre></div>
</div>
</li>
<li><p>If you’ve got the program available in your system’s global Python
interpreter (and you’re okay with running the program at the startup of each
shell session - Python’s speed is admittedly not its strong point) you could
add that snippet to your shell’s startup file, such as <code class="docutils literal notranslate"><span class="pre">~/.zshrc</span></code> or
<code class="docutils literal notranslate"><span class="pre">~/.bashrc</span></code>.</p></li>
<li><p>If the program’s available globally but you’d prefer to <em>avoid</em> running an
extra Python program at shell startup, you can cache the output of the
command in its own file; where this file lives is entirely up to you and how
your shell is configured. For example, you might just drop it into your home
directory as a hidden file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ inv --print-completion-script zsh &gt; ~/.invoke-completion.sh
</pre></div>
</div>
<p>and then perhaps add the following to the end of <code class="docutils literal notranslate"><span class="pre">~/.zshrc</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">source</span> <span class="o">~/.</span><span class="n">invoke</span><span class="o">-</span><span class="n">completion</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>But again, this is entirely up to you and your shell.</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>If you’re using <code class="docutils literal notranslate"><span class="pre">fish</span></code>, you <em>must</em> use this tactic, as our fish
completion script is not suitable for direct sourcing. Fish shell users
should direct the output of the command to a file in the
<code class="docutils literal notranslate"><span class="pre">~/.config/fish/completions/</span></code> directory.</p>
</div>
</li>
<li><p>Finally, if your copy of the needing-completion program is only installed in
a specific environment like a virtualenv, you can use either of the above
techniques:</p>
<blockquote>
<div><ul class="simple">
<li><p>Caching the output and referencing it in a global shell startup file will
still work in this case, as it does not require the program to be
available when the shell loads – only when you actually attempt to tab
complete.</p></li>
<li><p>Using the <code class="docutils literal notranslate"><span class="pre">source</span> <span class="pre">&lt;(inv</span> <span class="pre">--print-completion-script</span> <span class="pre">yourshell)</span></code> approach
will work <em>as long as</em> you place it in some appropriate per-environment
startup file, which will vary depending on how you manage Python
environments. For example, if you use <code class="docutils literal notranslate"><span class="pre">virtualenvwrapper</span></code>, you could
append the <code class="docutils literal notranslate"><span class="pre">source</span></code> line in <code class="docutils literal notranslate"><span class="pre">/path/to/virtualenv/bin/postactivate</span></code>.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</section>
<section id="utilizing-tab-completion-itself">
<h3>Utilizing tab completion itself<a class="headerlink" href="#utilizing-tab-completion-itself" title="永久链接至标题">¶</a></h3>
<p>You’ve ensured that the completion script is active in your environment - what
have you gained?</p>
<ul>
<li><p>By default, tabbing after typing <code class="docutils literal notranslate"><span class="pre">inv</span></code> or <code class="docutils literal notranslate"><span class="pre">invoke</span></code> will display task
names from your current directory/project’s tasks file.</p></li>
<li><p>Tabbing after typing a dash (<code class="docutils literal notranslate"><span class="pre">-</span></code>) or double dash (<code class="docutils literal notranslate"><span class="pre">--</span></code>) will display
valid options/flags for the current context: core Invoke options if no task
names have been typed yet; options for the most recently typed task
otherwise.</p>
<blockquote>
<div><ul class="simple">
<li><p>Tabbing while typing a partial long option will complete matching long
options, using your shell’s native substring completion. E.g. if no task
names have been typed yet, <code class="docutils literal notranslate"><span class="pre">--e&lt;tab&gt;</span></code> will offer <code class="docutils literal notranslate"><span class="pre">--echo</span></code> as a
completion option.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Hitting tab when the most recent typed/completed token is a flag which takes
a value, will ‘fall through’ to your shell’s native filename completion.</p>
<blockquote>
<div><ul class="simple">
<li><p>For example, prior to typing a task name, <code class="docutils literal notranslate"><span class="pre">--config</span> <span class="pre">&lt;tab&gt;</span></code> will
complete local file paths to assist in filling in a config file.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Invoke</a></h1>



<p class="blurb">Pythonic task execution</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=pyinvoke&repo=invoke&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





    

<p>
<a class="badge" href="https://travis-ci.org/pyinvoke/invoke">
    <img
        alt="https://secure.travis-ci.org/pyinvoke/invoke.svg?branch=master"
        src="https://secure.travis-ci.org/pyinvoke/invoke.svg?branch=master"
    />
</a>
</p>




    

<p>
<a class="badge" href="https://codecov.io/github/pyinvoke/invoke">
    <img
    alt="https://codecov.io/github/pyinvoke/invoke/coverage.svg?branch=master"
    src="https://codecov.io/github/pyinvoke/invoke/coverage.svg?branch=master"
    />
</a>
</p>
<h3>导航</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="getting-started.html">快速入门</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#"><code class="docutils literal notranslate"><span class="pre">inv[oke]</span></code> 核心用法</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#core-options-and-flags">核心选项和旗标</a></li>
<li class="toctree-l2"><a class="reference internal" href="#shell-tab-completion">Shell tab completion</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#generating-a-completion-script">Generating a completion script</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sourcing-the-script">Sourcing the script</a></li>
<li class="toctree-l3"><a class="reference internal" href="#utilizing-tab-completion-itself">Utilizing tab completion itself</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="concepts/configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="concepts/invoking-tasks.html">Invoking tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="concepts/library.html">Using Invoke as a library</a></li>
<li class="toctree-l1"><a class="reference internal" href="concepts/loading.html">Loading collections</a></li>
<li class="toctree-l1"><a class="reference internal" href="concepts/namespaces.html">构建名称空间</a></li>
<li class="toctree-l1"><a class="reference internal" href="concepts/testing.html">Testing Invoke-using codebases</a></li>
<li class="toctree-l1"><a class="reference internal" href="concepts/watchers.html">Automatically responding to program output</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api/__init__.html"><code class="docutils literal notranslate"><span class="pre">__init__</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="api/collection.html"><code class="docutils literal notranslate"><span class="pre">collection</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="api/config.html"><code class="docutils literal notranslate"><span class="pre">config</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="api/context.html"><code class="docutils literal notranslate"><span class="pre">context</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="api/exceptions.html"><code class="docutils literal notranslate"><span class="pre">exceptions</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="api/executor.html"><code class="docutils literal notranslate"><span class="pre">executor</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="api/loader.html"><code class="docutils literal notranslate"><span class="pre">loader</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="api/parser.html"><code class="docutils literal notranslate"><span class="pre">parser</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="api/program.html"><code class="docutils literal notranslate"><span class="pre">program</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="api/runners.html"><code class="docutils literal notranslate"><span class="pre">runners</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="api/tasks.html"><code class="docutils literal notranslate"><span class="pre">tasks</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="api/terminals.html"><code class="docutils literal notranslate"><span class="pre">terminals</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="api/util.html"><code class="docutils literal notranslate"><span class="pre">util</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="api/watchers.html"><code class="docutils literal notranslate"><span class="pre">watchers</span></code></a></li>
</ul>


<hr />
<ul>
    
    <li class="toctree-l1"><a href="https://daobook.github.io/invoke">主页</a></li>
    
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">快速搜索</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="转向" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>


<h3 class="donation">Donate/support</h3>







<p>
Professionally-supported Invoke is available with the
<a href="https://tidelift.com/subscription/pkg/pypi-invoke?utm_source=pypi-invoke&utm_medium=referral&utm_campaign=docs">Tidelift Subscription</a>.
</p>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2022 Jeff Forcier.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.4.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/invoke.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-18486793-3']);
      _gaq.push(['_setDomainName', 'none']);
      _gaq.push(['_setAllowLinker', true]);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
    
  </body>
</html>